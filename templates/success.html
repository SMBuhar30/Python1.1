
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Success</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css' rel='stylesheet' />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.14.0/css/all.css"
      integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="path/to/your/css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
    body{
        font-family: 'Georgia', sans-serif;
        background-color: #f4ede8;
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 200vh;
        color: #333;
    }
 
    .black-box {
        width: 200%;
        background-color: #000;
        color: #fff;
        padding: 5px 5%;
        display: flex;
        align-items: center;
        position: fixed;
        top: 0;
        z-index: 1000;
        box-sizing: border-box;
    }
 
    .black-box input[type="text"] {
        width: 350px;
        padding: 10px 10px;
        border: none;
        border-radius: 5px;
        font-size: 15px;
        margin-right: 400px;
    }
 
    .spacer {
        margin-left: 500px;
    }
 
    #search-box {
            width: 70%;
            padding: 5px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 0 auto;
            color: #000; /* Center the search box */
        }
        #suggestions {
            list-style-type: none;
            padding: 0;
            margin: 0;
            background-color: white;
            color: #000;
            position: absolute;
            z-index: 2000;
        }
        #suggestions li {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            cursor: pointer;
        }
        #suggestions li:hover {
            background-color: #f0f0f0;
        }
        #user-info {
            margin-top: 20px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none;
            position: absolute;
            top: calc(100% + 10px);
            left: 0;
            width: 100%;
            background-color: #fefefe;
            z-index: 100;
            color: #000;
        }
        #user-info.show {
            display: block;
        }
        .reports-to {
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 5px;
            display: inline-block;
            margin-top: 20px;
        }
        .opaque-background {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 50;
        }
        .opaque-background.show {
            display: block;
        }
 
        .modal {
            display: none;
            position: fixed;
            z-index: 300;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
 
        * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: 'Kumbh Sans', sans-serif;
}
 
.navbar {
    background: #fff;
    height: 50px;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2rem;
    padding: 20px 20px;
    margin-top: 60px;
    position: fixed;
}
 
.navbar__container {
    display: flex;
    justify-content: space-between;
    height: 50px;
    width: 100%;
    max-width: 1500px;
    margin-right: auto;
    margin-left: auto;
    padding-right: 20px;
    padding-left: 20px;
}
 
.navbar__menu {
    display: flex;
    align-items: center;
    list-style: none;
    text-align: center;
}
 
.navbar__item {
    height: 60px;
    border:none;
}
 
.navbar__links {
    color: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    padding: 0 1rem;
    height: 100%;
    position: relative;
    cursor: pointer;
}
 
.navbar__links:hover {
    color: #f77062;
    transition: all 0.3s ease;
}
 
.dropdown-content {
            display: none;
            position: fixed;
            background-color: #f9f9f9;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            top: 100px;
        }
 
        .dropdown-content a {
            top: 50px;
            color: black;
            padding: 5px 16px;
            text-decoration: none;
            display: block;
        }
 
        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }
 
        .navbar__links:hover .dropdown-content {
            display: block;
        }
 
        .section {
            display: none;
        }
 
        #internal-news-section,
        #global-news-section {
            padding: 80px;
        }
       
 
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgb(0,0,0);
    background-color: rgba(0,0,0,0.4);
    justify-content: center;
    align-items: center;
}
 
.modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
}
 
.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}
 
.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}
 
.navbar__btn {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0 1rem;
    width: 100%;
}
 
.button {
    display: flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    padding: 10px 20px;
    height: 100%;
    width: 100%;
    border: none;
    outline: none;
    border-radius: 4px;
    background: #f77062;
    color: #000;
}
 
.button:hover {
    background: #4837ff;
    transition: all 0.3s ease;
}
 
 
 
 
    .menu-toggle {
        position: fixed;
        top: 0px;
        left: 0px;
        width: 300px;
        height: 60px;
        background-color: #000;
        color: #fff;
        padding: 5px;
        cursor: pointer;
        z-index: 1001;
    }
 
    .menu {
        position: fixed;
        top: 10;
        left: -250px;
        width: 250px;
        height: 100%;
        background-color: #333;
        color: #fff;
        display: flex;
        flex-direction: column;
        padding: 20px;
        z-index: 1000;
        transition: left 0.3s ease;
    }
 
    .menu.open {
        left: 0;
    }
 
    .menu a {
        color: #fff;
        text-decoration: none;
        margin: 20px;
        font-size: 18px;
    }
 
    .menu a:hover {
        text-decoration: underline;
    }
 
    .menu a:first-child {
        margin-top: 50px; /* Larger gap before the first link */
    }
 
    .section {
            display: none;
        }
 
    .section.active {
            display: flex; /* Show active section */
            flex-direction: column; /* Ensure content stacks vertically */
            align-items: center; /* Center items horizontally */
            margin-top: 100px; /* Adjust spacing between sections */
        }
 
    .greeting-container {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-grow: 10;
        height: 100vh;
        margin-top: 100px;
    }
 
    .greeting {
        font-size: 30px;
        margin: 30;
        margin-left: 30px;
        margin-top: 150px;
        margin-bottom: 50px;
    }
 
 
 
.logo-container {
    display: flex;
    justify-content: center;
    flex-wrap: nowrap;
    gap: 50px;
    padding: 20px 20px;
    margin-top: 10px;
    overflow-x: auto;
   
}
 
 
 
.logo-container a {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-decoration: none; /* Remove underline from links */
    width: 100px; /* Adjusted width to accommodate the box */
    height: 150px; /* Adjusted height to accommodate the box */
    transition: transform 0.3s;
    color: inherit; /* Inherit text color */
    border: 1px solid #ccc; /* Border to create a box around the logo */
    border-radius: 8px; /* Optional: adds rounded corners */
    padding: 5px; /* Padding inside the box */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Optional: adds a shadow effect */
    background-color: #fff; /* Optional: adds background color to the box */
}
 
.logo-container a img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}
 
.app-name {
    margin-top: 15px; /* Space between the logo and app name */
    font-size: 14px; /* Adjust font size as needed */
    text-align: center;
}
 
 
 
.logo-container a:hover {
    transform: scale(1.1);
}
 
.container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%; /* Adjust width as needed */
    margin-top: 30px;
}
 
.row {
    display: flex;
    justify-content: center;
    width: 100%;
    gap: 30px;
    margin-bottom: 30px;
}
 
.box {
    background-color: #F5F5F5;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    width: 50%; /* Adjust width as needed */
    overflow-y: auto;
    min-height: 200px;
}
 
.box h3 {
    margin-top: 0;
    font-size: 24px;
    font-weight: 700;
    color: #333;
}
 
ul {
    list-style: none;
    padding: 0;
}
 
li {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
    background-color: #fff;
    border: 1px solid #ddd;
    margin-bottom: 10px;
    border-radius: 4px;
}
 
.note-text {
    flex: 1;
    font-size: 16px;
    color: #333;
}
 
button {
    margin-left: 10px;
    padding: 5px 10px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
 
button:hover {
    background-color: #0056b3;
}
 
#sticky-notes-form textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 16px;
    resize: vertical;
}
 
#sticky-notes-form button {
    background-color: #28a745;
    color: white;
}
 
#sticky-notes-form button:hover {
    background-color: #218838;
}
 
 
.box p {
    font-size: 16px;
    line-height: 1.6;
    color: #666;
}
 
.clocks,
.announcements {
    display: block; /* Ensure clocks and announcements are displayed */
}
 
.announcements #announcement-display {
    display: block; /* Ensure announcement display is visible */
}
 
.announcements.edit-mode #announcement-form {
    display: block;
}
 
.announcements.edit-mode #announcement-display {
    display: none;
}
 
.notes {
    margin-bottom: 20px;
}
 
.clocks p,
.announcements p {
    margin: 10px 0;
    font-size: 14px;
    color: #555;
}
 
.clock-info {
    text-align: center;
}
 
.clock-info p {
    font-size: 18px;
    color: #333;
    margin: 8px 0;
}
 
.date {
    font-size: 16px;
    color: #555;
    margin-bottom: 5px;
}
 
.time {
    font-size: 24px;
    font-weight: 700;
    color: #f01919;
}
 
/* Common styles for all themes */
body {
        font-family: 'Georgia', sans-serif;
        background-color: #f4ede8;
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 200vh;
        color: #333;
   
}
 
/* Light theme */
body.light {
    background-color: #f4ede8;
    color: #333;
    .black-box {
        width: 100%;
        background-color: #000;
        color: #fff;
        padding: 5px 5%;
        display: flex;
        align-items: center;
        position: fixed;
        top: 0;
        z-index: 1000;
        box-sizing: border-box;
    }
}
 
.navbar.light,
.black-box.light {
    background-color: #fff;
    color: #000;
}
 
/* Dark theme */
body.dark {
    background-color: #333;
    color: #fff;
    .black-box {
        width: 100%;
        background-color: #000;
        color: #fff;
        padding: 5px 5%;
        display: flex;
        align-items: center;
        position: fixed;
        top: 0;
        z-index: 1000;
        box-sizing: border-box;
    }
    .navbar {
        background: #fff;}
    .navbar__links {
        color: #000;}
}
 
.navbar.dark,
.black-box.dark {
    background-color: #000;
    color: #fff;
}
 
 
</style>
</head>
<body>
    <div class="black-box">
        <div class="spacer"></div>
        <div class="opaque-background" id="opaque-bg"></div>
        <div class="black-box">
        <div class="container" style="margin:10px auto; width:500px !important;">
            <input type="text" id="search-box" placeholder="Search for users...">
            <ul id="suggestions" style="z-index: 2000;"></ul>
            <div id="user-info">
            </div>
        </div>
    </div>
       
    </div>
   
    <nav class="navbar">
        <div class="navbar__container">
            <div class="navbar__toggle" id="mobile-menu">
                <span class="bar"></span> <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <ul class="navbar__menu">
                <li class="navbar__item">
                    <a href="http://127.0.0.1:5000/success" class="navbar__links">HOME</a>
                </li>
                <li class="navbar__item">
                    <div class="navbar__links">NEWS
                        <div class="dropdown-content">
                            <a href="#" onclick="showSection('internal-news-section')">Internal News</a>
                            <a href="https://www.sandhata.com/category/sandhata-technologies-news/" target="_blank">Global News</a>
                        </div>
                    </div>
                </li>
                <li class="navbar__item">
                    <a href="https://www.sandhata.com/category/blog/" target="_blank" class="navbar__links">BLOGS</a>
                </li>
                <li class="navbar__item">
                    <a href="https://sandhata.zohodesk.in/" target="_blank" class="navbar__links">HELP</a>
                </li>
            </ul>
        </div>
    </nav>
 
 
 
    <div class="menu-toggle" onclick="toggleMenu()">☰ Menu</div>
    <div class="menu" id="menu">
       
        <a href="http://127.0.0.1:5000/success" onclick="showSection('home-section')">HOME</a>
        <a href="#" onclick="showSection('profile-section')">L&D</a>
        <a href="https://www.sandhata.com/" target="_blank" onclick="showSection('profile-section')">About us</a>
        <a href="#" onclick="openSettingsModal()">Settings</a>
    </div>
 
    <div class="greeting">
        <b>Welcome, {{ cn }}!</b>
    </div>
 
        <div class="logo-container">
            <a href="https://www.office.com" target="_blank" class="office365-logo">
                <img src="{{ url_for('static', filename='img/office365_logo.png') }}" alt="Office 365 Logo">
                <span class="app-name">OFFICE 365</span>
            </a>
            <a href="https://www.zoho.com/people/login.html" target="_blank" class="zoho-logo">
                <img src="{{ url_for('static', filename='img/zoho_logo.png') }}" alt="Zoho Logo">
                <span class="app-name">ZOHO</span>
            </a>
            <a href="https://gurukul.sandhata.com/" target="_blank" class="gurukul-logo">
                <img src="{{ url_for('static', filename='img/gurukul_logo.png') }}" alt="Gurukul Logo">
                <span class="app-name">GURUKUL</span>
            </a>
            <a href="https://outlook.office.com/mail/" target="_blank" class="outlook-logo">
                <img src="{{ url_for('static', filename='img/outlook_logo.png') }}" alt="Outlook Logo">
                <span class="app-name">OUTLOOK</span>
            </a>
            <a href="https://manavata.org/" target="_blank" class="manavata-logo">
                <img src="{{ url_for('static', filename='img/manavata_logo.png') }}" alt="Manavata Logo">
                <span class="app-name">OUR CSR</span>
            </a>
            <a href="https://apps.powerapps.com/play/e/default-5e45e2ef-d6aa-4ad1-aaca-a7187394a753/a/c03894d5-591f-4634-82ae-9b1c02a4a9cb?tenantId=5e45e2ef-d6aa-4ad1-aaca-a7187394a753&hint=8ebbc456-f640-4e3d-a2a4-4e595524d431&sourcetime=1716881580795" target="_blank" class="SaAT-logo">
                <img src="{{ url_for('static', filename='img/SaAT_logo.png') }}" alt="SaAT Logo">
                <span class="app-name">SaAT</span>
            </a>
            <a href="http://gini.sandhata.com/" target="_blank" class="Gini-logo">
                <img src="{{ url_for('static', filename='img/gini_logo.png') }}" alt="SaAT Logo">
                <span class="app-name">Gini-Chatbot</span>
            </a>
            {% if is_hr %}
            <a href="https://talenthire.ceipal.com/signin" target="_blank" class="ceipal-logo">
                <img src="{{ url_for('static', filename='img/ceipal_logo.png') }}" alt="Ceipal Logo">
            </a>
            {% endif %}
    </div>
    <div class="container">
        <div class="row">
            <div class="box sticky-notes">
                <h3>Sticky Notes</h3>
                <form id="sticky-notes-form" action="/add_sticky_note" method="POST">
                    <textarea name="sticky_note" rows="4" cols="50" placeholder="Write your sticky note here..."></textarea>
                    <button type="submit">Add Sticky Note</button>
                </form>
                <ul id="sticky-notes-list">
                    {% for note in sticky_notes %}
                        <li data-id="{{ note.id }}">
                            <span class="note-text">{{ note.text }}</span>
                            <button class="edit-note">Edit</button>
                            <button class="delete-note">Delete</button>
                        </li>
                    {% endfor %}
                </ul>
            </div>
       
 
 
       
                <div class="box clocks">
                    <h3>Clocks</h3>
                    <p class="date" id="date"></p>
                    <p class="time" id="india-clock"></p>
                    <p class="time" id="uk-clock"></p>
                </div>
                <div class="box announcements">
                    <h3>Announcements</h3>
                    {% if is_hr %}
                    <button id="toggle-mode">Switch to Edit Mode</button>
                    <form id="announcement-form" action="{{ url_for('update_announcement') }}" method="POST" data-url="{{ url_for('update_announcement') }}" style="display:none;">
                        <textarea id="announcement-text" name="announcement" placeholder="Write announcements here...">{{ announcements }}</textarea>
                        <button type="submit">Update Announcement</button>
                    </form>
                    {% endif %}
                    <p id="announcement-display">{{ announcements }}</p>
                </div>
               
               
                <div class="search-results">
                    <ul id="search-results-list">
                        <!-- Search results will be dynamically added here -->
                    </ul>
                </div>
            </div>
        </div>
 
    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSettingsModal()">&times;</span>
            <h2>Settings</h2> <br>
            <!-- Add your settings form or content here -->
            <form id="settings-form" action="/update_settings" method="POST">
                <label for="setting1">THEME:</label>
                <select id="theme" name="theme">
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                </select><br><br>
                <label for="setting2">PASSWORD :</label>
                <a href="https://ad.sandhata.com/RDWeb/Pages/en-US/login.aspx?ReturnUrl=/RDWeb/Pages/en-US/Default.aspx" target="_blank" onclick="showSection('profile-section')">Change your password -></a> <br>
                <br>
                <button type="submit">Save Settings</button>
            </form>
        </div>
    </div>
       
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#sticky-notes-form').submit(function(event) {
                event.preventDefault();
                const formData = $(this).serialize();
                $.ajax({
                    type: 'POST',
                    url: '/add_sticky_note',
                    data: formData,
                    success: function(response) {
                        if (response.success) {
                            const newNote = response.new_note;
                            $('#sticky-notes-list').append(`
                                <li data-id="${newNote.id}">
                                    <span class="note-text">${newNote.text}</span>
                                    <button class="edit-note">Edit</button>
                                    <button class="delete-note">Delete</button>
                                </li>
                            `);
                        } else {
                            alert('Failed to add sticky note.');
                        }
                    },
                    error: function() {
                        alert('Error adding sticky note.');
                    }
                });
            });
 
            $(document).on('click', '.edit-note', function() {
                const noteId = $(this).parent().data('id');
                const noteText = $(this).siblings('.note-text').text();
                const newText = prompt('Edit your note:', noteText);
                if (newText !== null) {
                    $.ajax({
                        type: 'POST',
                        url: '/edit_sticky_note',
                        data: { id: noteId, text: newText },
                        success: function(response) {
                            if (response.success) {
                                $(`li[data-id="${noteId}"] .note-text`).text(newText);
                            } else {
                                alert('Failed to edit sticky note.');
                            }
                        },
                        error: function() {
                            alert('Error editing sticky note.');
                        }
                    });
                }
            });
 
            $(document).on('click', '.delete-note', function() {
                const noteId = $(this).parent().data('id');
                if (confirm('Are you sure you want to delete this note?')) {
                    $.ajax({
                        type: 'POST',
                        url: '/delete_sticky_note',
                        data: { id: noteId },
                        success: function(response) {
                            if (response.success) {
                                $(`li[data-id="${noteId}"]`).remove();
                            } else {
                                alert('Failed to delete sticky note.');
                            }
                        },
                        error: function() {
                            alert('Error deleting sticky note.');
                        }
                    });
                }
            });
        });
    </script>
 
   
 
<script>
    $(document).ready(function() {
        // Toggle between read and edit modes
        $('#toggle-mode').click(function() {
            $('.announcements').toggleClass('edit-mode');
            if ($('.announcements').hasClass('edit-mode')) {
                $('#toggle-mode').text('Switch to Read Mode');
                $('#announcement-form').show();
                $('#announcement-display').hide();
            } else {
                $('#toggle-mode').text('Switch to Edit Mode');
                $('#announcement-form').hide();
                $('#announcement-display').show();
            }
        });
 
        // Handle form submission via AJAX
        $('#announcement-form').submit(function(event) {
            event.preventDefault(); // Prevent default form submission
            const formData = $(this).serialize(); // Serialize form data
            const url = $(this).data('url'); // Get the URL from the data attribute
            $.ajax({
                type: 'POST',
                url: url,
                data: formData,
                success: function(response) {
                    if (response.success) {
                        $('#announcement-display').text(response.new_announcement); // Update announcement text on success
                        alert('Announcement updated successfully!');
                        $('.announcements').removeClass('edit-mode');
                        $('#toggle-mode').text('Switch to Edit Mode');
                        $('#announcement-form').hide();
                        $('#announcement-display').show();
                    } else {
                        alert('Failed to update announcement.');
                    }
                },
                error: function() {
                    alert('Error updating announcement.');
                }
            });
        });
    });
</script>
 
 
 
<script>
    function toggleDropdown() {
    var newsLink = document.getElementById('news-link');
    newsLink.classList.toggle('active');
}
 
function showSection(sectionId) {
    var sections = document.querySelectorAll('.section');
    sections.forEach(function(section) {
        section.style.display = 'none';
    });
 
    var targetSection = document.getElementById(sectionId);
    targetSection.style.display = 'block';
}
 
document.getElementById('news-link').addEventListener('click', function(event) {
    event.stopPropagation();
    toggleDropdown();
});
 
document.addEventListener('click', function(event) {
    var newsLink = document.getElementById('news-link');
    if (!newsLink.contains(event.target)) {
        newsLink.classList.remove('active');
    }
});
</script>
 
<script>
            function toggleMenu() {
            var menu = document.getElementById('menu');
            menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
        }
 
        // Open the settings modal
        function openSettingsModal() {
            var modal = document.getElementById('settingsModal');
            modal.style.display = 'flex';
        }
 
        // Close the settings modal
        function closeSettingsModal() {
            var modal = document.getElementById('settingsModal');
            modal.style.display = 'none';
        }
 
        // Close the modal if the user clicks outside of it
        window.onclick = function(event) {
            var modal = document.getElementById('settingsModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
</script>
 
<script>
        function toggleMenu() {
            const menu = document.getElementById('menu');
            menu.classList.toggle('open');
        }
 
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            toggleMenu();
        }
 
        function updateClocks() {
            const currentDate = new Date().toLocaleDateString();
            const indiaTime = new Date().toLocaleTimeString("en-US", { timeZone: "Asia/Kolkata" });
            const ukTime = new Date().toLocaleTimeString("en-US", { timeZone: "Europe/London" });
 
            document.getElementById('date').textContent = currentDate;
            document.getElementById('india-clock').textContent = "India Time: " + indiaTime;
            document.getElementById('uk-clock').textContent = "UK Time: " + ukTime;
        }
 
        setInterval(updateClocks, 1000);
        </script>
 
<script>
            // Apply saved theme on page load
document.addEventListener('DOMContentLoaded', () => {
    const savedTheme = localStorage.getItem('theme') || 'light'; // Default to light theme
    document.body.classList.add(savedTheme);
    document.querySelector('.navbar').classList.add(savedTheme);
    document.querySelector('.black-box').classList.add(savedTheme);
    document.getElementById('theme').value = savedTheme; // Set the dropdown to the saved theme
});
 
// Update the theme when the settings form is submitted
document.getElementById('settings-form').addEventListener('submit', function(event) {
    event.preventDefault(); // Prevent default form submission
 
    const selectedTheme = document.getElementById('theme').value;
   
    // Remove current theme classes
    document.body.classList.remove('light', 'dark', 'classic', 'high-contrast');
    document.querySelector('.navbar').classList.remove('light', 'dark', 'classic', 'high-contrast');
    document.querySelector('.black-box').classList.remove('light', 'dark', 'classic', 'high-contrast');
 
    // Add the selected theme classes
    document.body.classList.add(selectedTheme);
    document.querySelector('.navbar').classList.add(selectedTheme);
    document.querySelector('.black-box').classList.add(selectedTheme);
 
    // Save the selected theme to localStorage
    localStorage.setItem('theme', selectedTheme);
   
    closeSettingsModal();
});
 
        </script>
 
<script>
    const searchBox = document.getElementById('search-box');
const container = document.querySelector('.container');
const opaqueBg = document.getElementById('opaque-bg');
const suggestions = document.getElementById('suggestions');
const userInfo = document.getElementById('user-info');
 
searchBox.addEventListener('input', function() {
    const query = this.value;
    if (query.length > 0) {
        fetch('/live_search?term=' + encodeURIComponent(query))
            .then(response => response.json())
            .then(data => {
                suggestions.innerHTML = '';
                data.suggestions.forEach(suggestion => {
                    const li = document.createElement('li');
                    li.textContent = suggestion;
                    li.onclick = () => selectSuggestion(suggestion);
                    suggestions.appendChild(li);
                });
                showOpaqueBackground(); // Show opaque background on search results
            })
            .catch(error => console.error('Error:', error));
    } else {
        suggestions.innerHTML = '';
        hideOpaqueBackground(); // Hide opaque background when no search results
    }
});
 
function selectSuggestion(suggestion) {
    searchBox.value = suggestion;
    suggestions.innerHTML = '';
    showUserInfo(suggestion);
}
 
function showUserInfo(cn_name) {
    fetch('/user_info?cn_name=' + encodeURIComponent(cn_name))
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                userInfo.classList.remove('show'); // Hide user info
                userInfo.innerHTML = data.error; // Show error message
            } else {
                const details = `
                    <div><strong>${data.cn}</strong></div>
                    <div>${data.description}</div>
                    <div><strong>Email:</strong> ${data.mail}</div>
                    <div><strong>Phone:</strong> ${data.telephoneNumber}</div>
                    <div class="reports-to"><strong>Reports to:</strong> ${data.manager}</div>
                `;
                userInfo.innerHTML = details;
                userInfo.classList.add('show'); // Show user info
            }
            showOpaqueBackground(); // Ensure opaque background is shown after user info
        })
        .catch(error => console.error('Error:', error));
}
 
function showOpaqueBackground() {
    opaqueBg.classList.add('show');
}
 
function hideOpaqueBackground() {
    opaqueBg.classList.remove('show');
    userInfo.classList.remove('show'); // Hide user info
    searchBox.value = ''; // Clear search box
    suggestions.innerHTML = ''; // Clear suggestions
    userInfo.innerHTML = ''; // Clear user info
}
 
// Event listener to hide opaque background if clicked outside user info and search area
document.addEventListener('click', function(event) {
    if (!event.target.closest('.container')) {
        hideOpaqueBackground();
    }
});
 
// Prevent the click inside the container from closing the search results
container.addEventListener('click', function(event) {
    event.stopPropagation();
});
 
</script>
 
</body>
</html>
 